### 在bash中执行下列命令
```
ulimit -n 1048576
sysctl -w fs.file-max=1048576
echo "*     -   nofile  1048576" >> /etc/security/limits.conf
echo "root  -   nofile  1048576" >> /etc/security/limits.conf
echo "session   required    pam_limits.so" >> /etc/pam.d/common-session
echo "ulimit -SHn 1048576"
```

### 有效性
* 在bash中执行,当前bash立刻有效
* 其他bash无效,在需要扩大最大文件数的bash上面执行 `ulimit -n 655350`,或者重新启动服务器

### 其他注意事项
* 不能动态修改其他进程的最大打开文件数,必须使用bash重启
* 可以只修改当前bash的session的限制
* 当前bash的session限制修改好了,这个bash开的子线程也会使用这些限制.
* 使用 `cat /proc/2655/limits` 查看某个进程的最大文件打开数目限制
* 使用 `cat /proc/self/limits` 查看当前进程的最大文件打开数目
* 其中 `ulimit -n 10485760` 是一个bash的指令,在子进程中执行,不会修改父进程.